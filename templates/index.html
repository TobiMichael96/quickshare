<!DOCTYPE html>
<html>
<head>
    <title>TM-Quickshare</title>
    <meta name="viewport" content="initial-scale=1.0, width=device-width"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
            integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js"
            integrity="sha512-aMGMvNYu8Ue4G+fHa359jcPb1u+ytAF+P2SCb+PxrjCdO3n3ZTxJ30zuH39rimUggmTwmh2u7wvQsDTHESnmfQ=="
            crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/index.css') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.png') }}">
</head>
<body>
<div class="title">TM-Quickshare</div>

<div class="container">
    <div class="content">
        <div class="input-group mb-3" id="input_group">
            <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup">Name</span>
            </div>
            <input id="device_name" type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup">
        </div>
        <div id="warning" class="no-name">Please choose a device name.</div>
        <br>
        <button type="button" id="new_session" class="btn btn-primary btn-lg">Start session</button>
    </div>
</div>

<script>
    const input_group = document.getElementById("input_group");
    const warning = document.getElementById("warning");
    const device_name = document.getElementById("device_name");

    // Check if the user already set a device name, if not force them to set one.
    if (window.localStorage.Name) {
        device_name.value = window.localStorage.Name;
    }

    // Set input to device name
    device_name.value = window.localStorage.Name;

    const new_session = document.getElementById("new_session");

    // Start a new session when name is entered.
    new_session.onclick = function (e) {
        e.preventDefault();
        if (device_name.value == null || device_name.value.trim().length === 0) {
            input_group.classList.add("error");
            warning.style.visibility = "visible";
        } else {
            window.location.href = "/new_session";
        }
    };

</script>

</body>
</html>